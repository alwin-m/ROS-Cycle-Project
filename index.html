<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üå∏ ROS Cycle - Period Tracker</title>
    <style>
        /* ========== Fonts & Reset ========== */
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&display=swap');
        * { margin:0; padding:0; box-sizing:border-box; }
        body { font-family:'Nunito',sans-serif; background: linear-gradient(135deg, #FFF0F5, #F0FFF0); color:#4A4A4A; min-height:100vh; display:flex; justify-content:center; align-items:center; }

        /* ========== Container ========== */
        .container { width:100%; max-width:500px; padding:20px; background:#fff; border-radius:25px; box-shadow:0 4px 20px rgba(0,0,0,0.1); text-align:center; }

        /* ========== Logo & Titles ========== */
        .logo { font-size:2.5em; font-weight:700; background: linear-gradient(45deg,#FF6B9D,#FFB6C1); -webkit-background-clip:text; -webkit-text-fill-color:transparent; margin-bottom:10px; animation:bounce 2s infinite; }
        @keyframes bounce { 0%,20%,50%,80%,100% { transform:translateY(0); } 40%{ transform:translateY(-10px); } 60%{ transform:translateY(-5px); } }
        .subtitle { font-weight:300; color:#8A8A8A; margin-bottom:20px; }
        .user-greeting { font-size:1.3em; margin-bottom:20px; color:#FF6B9D; }

        /* ========== Inputs ========== */
        .input-group { margin-bottom:20px; text-align:left; }
        .input-label { display:block; margin-bottom:8px; font-weight:600; }
        .input-field { width:100%; padding:12px 15px; border:2px solid #FFB6C1; border-radius:15px; font-size:16px; outline:none; transition:all 0.3s ease; }
        .input-field:focus { border-color:#FF6B9D; box-shadow:0 0 15px rgba(255,107,157,0.2); }

        /* ========== Buttons ========== */
        .btn { background: linear-gradient(45deg,#FF6B9D,#FFB6C1); color:#fff; border:none; padding:12px 30px; border-radius:25px; font-weight:600; cursor:pointer; transition:all 0.3s ease; margin:5px; }
        .btn:hover { transform:translateY(-2px); box-shadow:0 8px 30px rgba(0,0,0,0.15); }
        .btn-secondary { background:#E6E6FA; color:#4A4A4A; }

        /* ========== Calendar ========== */
        .calendar { display:grid; grid-template-columns:repeat(7,1fr); gap:8px; margin:20px 0; }
        .calendar-day { padding:10px; border-radius:12px; background:#fff; border:1px solid #f0f0f0; cursor:pointer; transition:all 0.3s ease; position:relative; text-align:center; }
        .calendar-day:hover { transform:scale(1.1); box-shadow:0 4px 20px rgba(0,0,0,0.1); }
        .calendar-day.period { background:#FF6B9D; color:#fff; animation:pulse 2s infinite; }
        .calendar-day.fertile { background:#98D8C8; color:#4A4A4A; }
        .calendar-day.other-month { background:#f9f9f9; color:#ccc; }
        @keyframes pulse { 0%,100% { transform:scale(1); } 50% { transform:scale(1.05); } }

        .month-navigation { display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; }
        .month-title { font-size:1.8em; font-weight:700; }
        .nav-btn { background:#FFB6C1; border:none; border-radius:50%; padding:10px; cursor:pointer; }
        .nav-btn:hover { background:#FF6B9D; transform:scale(1.1); }

        .legend { display:flex; justify-content:center; gap:20px; margin-bottom:15px; }
        .legend-item { display:flex; align-items:center; gap:8px; font-size:0.9em; }
        .legend-color { width:16px; height:16px; border-radius:4px; }

        /* ========== Modal ========== */
        .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); align-items:center; justify-content:center; padding:20px; }
        .modal.active { display:flex; }
        .modal-content { background:#fff; padding:25px; border-radius:20px; max-width:400px; width:100%; position:relative; transform:scale(0.7); transition:transform 0.3s ease; }
        .modal.active .modal-content { transform:scale(1); }
        .close-btn { position:absolute; top:10px; right:15px; background:none; border:none; font-size:24px; cursor:pointer; color:#8A8A8A; }

        @media(max-width:480px){ .month-title{font-size:1.4em;} .btn{padding:10px 20px;} }
    </style>
</head>
<body>
    <div class="container">
        <!-- Welcome Screen -->
        <div class="screen active" id="welcome-screen">
            <div class="logo">üå∏ ROS Cycle</div>
            <p class="subtitle">Your cute period companion üíï</p>
            <div class="input-group">
                <label class="input-label" for="user-name">What's your name, beautiful? ‚ú®</label>
                <input type="text" id="user-name" class="input-field" placeholder="Enter your name">
            </div>
            <div class="input-group">
                <label class="input-label" for="user-age">Your age üåπ</label>
                <input type="number" id="user-age" class="input-field" placeholder="Enter your age" min="12" max="55">
            </div>
            <button class="btn" onclick="goToDateInput()">Let's Get Started! ü¶Ñ</button>
        </div>

        <!-- Date Input Screen -->
        <div class="screen" id="date-input-screen">
            <div class="logo">üìÖ Period Details</div>
            <div class="user-greeting" id="user-greeting"></div>
            <div class="input-group">
                <label class="input-label" for="last-period">When was your last period? üåπ</label>
                <input type="date" id="last-period" class="input-field">
            </div>
            <div class="input-group">
                <label class="input-label" for="cycle-length">Cycle length (days) üîÑ</label>
                <input type="number" id="cycle-length" class="input-field" value="28" min="21" max="35">
            </div>
            <button class="btn" onclick="calculateCycle()">Create My Calendar! ‚ú®</button>
            <button class="btn btn-secondary" onclick="goBack('welcome-screen')">‚Üê Back</button>
        </div>

        <!-- Calendar Screen -->
        <div class="screen calendar-screen" id="calendar-screen">
            <div class="user-greeting" id="calendar-greeting"></div>
            <div class="month-navigation">
                <button class="nav-btn" onclick="previousMonth()">‚Üê</button>
                <h2 class="month-title" id="current-month"></h2>
                <button class="nav-btn" onclick="nextMonth()">‚Üí</button>
            </div>
            <div class="calendar-header">
                <div class="day-header">Sun</div>
                <div class="day-header">Mon</div>
                <div class="day-header">Tue</div>
                <div class="day-header">Wed</div>
                <div class="day-header">Thu</div>
                <div class="day-header">Fri</div>
                <div class="day-header">Sat</div>
            </div>
            <div class="calendar" id="calendar"></div>
            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background:#FF6B9D;"></div>Period Days üåπ</div>
                <div class="legend-item"><div class="legend-color" style="background:#98D8C8;"></div>Fertile Window üå±</div>
            </div>
            <div>
                <button class="btn" onclick="goToDateInput()">Update Period Info üìù</button>
                <button class="btn btn-secondary" onclick="startOver()">Start Over üîÑ</button>
            </div>
            <p style="font-size:0.8em; margin-top:15px; color:#888;">‚ö†Ô∏è Disclaimer: Predictions are estimates. Not medically approved. Still a student project, many improvements pending. üå∏</p>
        </div>
    </div>

    <script>
        // ================== VARIABLES ==================
        let userName = '';
        let userAge = 0;
        let lastPeriod = null;
        let cycleLength = 28;
        let periodLength = 5;
        let calendarData = [];
        let currentMonthIndex = 0;
        let months = [];

        const screens = document.querySelectorAll('.screen');

        // ================== SCREEN FUNCTIONS ==================
        function goToDateInput(){
            const nameInput = document.getElementById('user-name').value.trim();
            const ageInput = parseInt(document.getElementById('user-age').value);
            if(nameInput === '' || isNaN(ageInput) || ageInput < 12 || ageInput > 55){
                alert('Please enter valid name and age between 12-55 üåπ');
                return;
            }
            userName = nameInput;
            userAge = ageInput;
            document.getElementById('user-greeting').innerText = `Hi ${userName}, let's track your periods! üå∏`;
            showScreen('date-input-screen');
        }

        function calculateCycle(){
            const dateInput = document.getElementById('last-period').value;
            const cycleInput = parseInt(document.getElementById('cycle-length').value);

            if(!dateInput){ alert('Please select a valid date üåπ'); return; }
            if(isNaN(cycleInput) || cycleInput < 21 || cycleInput > 35){ alert('Cycle length should be 21-35 days'); return; }

            lastPeriod = new Date(dateInput);
            cycleLength = cycleInput;

            generateCalendarData();
            currentMonthIndex = 0;
            showCalendarMonth(currentMonthIndex);
            showScreen('calendar-screen');
        }

        function goBack(screenId){
            showScreen(screenId);
        }

        function startOver(){
            if(confirm('Are you sure you want to start over? üå∏')){ location.reload(); }
        }

        function showScreen(screenId){
            screens.forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
        }

        // ================== CALENDAR LOGIC ==================
        function generateCalendarData(){
            calendarData = [];
            months = [];
            let date = new Date(lastPeriod);
            for(let i=0;i<12;i++){ // 12 months prediction
                let monthObj = {month:date.getMonth(), year:date.getFullYear(), days:[]};
                let daysInMonth = new Date(date.getFullYear(), date.getMonth()+1,0).getDate();
                for(let d=1;d<=daysInMonth;d++){
                    const dayObj = {date:new Date(date.getFullYear(),date.getMonth(),d), type:'normal'};
                    const diffDays = Math.floor((dayObj.date - lastPeriod)/(1000*60*60*24));
                    if(diffDays>=0){
                        if(diffDays % cycleLength < periodLength){ dayObj.type='period'; }
                        else if(diffDays % cycleLength >= periodLength && diffDays % cycleLength <= periodLength+5){ dayObj.type='fertile'; }
                    }
                    monthObj.days.push(dayObj);
                }
                months.push(monthObj);
                date.setMonth(date.getMonth()+1);
            }
        }

        function showCalendarMonth(index){
            if(index<0 || index>=months.length){ alert('No data for this month üå∏'); return; }
            const monthObj = months[index];
            document.getElementById('current-month').innerText = `${monthObj.month+1}/${monthObj.year}`;
            const calendarEl = document.getElementById('calendar');
            calendarEl.innerHTML = '';
            monthObj.days.forEach(d=>{
                const div = document.createElement('div');
                div.classList.add('calendar-day');
                div.innerText = d.date.getDate();
                if(d.type==='period'){ div.classList.add('period'); }
                else if(d.type==='fertile'){ div.classList.add('fertile'); }
                calendarEl.appendChild(div);
            });
            document.getElementById('calendar-greeting').innerText = `Hi ${userName}, here is your period calendar üå∏`;
        }

        function previousMonth(){ showCalendarMonth(--currentMonthIndex); }
        function nextMonth(){ showCalendarMonth(++currentMonthIndex); }
    </script>
</body>
</html>
